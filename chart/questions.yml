labels:
  io.cattle.role: project
  io.rancher.app_min_version: 9.0.2
questions:
  # Container Image
  - variable: IMAGE_REPOSITORY
    label: "Image Repository"
    description: "DOCR Repository (e.g., kob-bank)"
    type: string
    default: "kob-bank"
    required: true
    group: "Container Image"
  - variable: IMAGE_NAME
    label: "Image Name"
    description: "Container image name"
    type: string
    default: "transaction-check-api"
    required: true
    group: "Container Image"
  - variable: image.tag
    label: "Image Tag"
    description: "Docker image tag (e.g., latest, v1.0.0)"
    type: string
    default: "latest"
    required: true
    group: "Container Image"

  # Service Configuration
  - variable: service.type
    label: "Service Type"
    description: "Kubernetes service type"
    type: enum
    options:
      - ClusterIP
      - NodePort
      - LoadBalancer
    default: "NodePort"
    group: "Service"
  - variable: service.port
    label: "Service Port"
    description: "Port number for the service"
    type: int
    default: 3000
    group: "Service"

  # Ingress Configuration
  - variable: ingress.enabled
    label: "Enable Ingress"
    description: "Create Ingress resource for external access"
    type: boolean
    default: false
    group: "Ingress"
    show_subquestions_if: true
    subquestions:
      - variable: ingress.className
        label: "Ingress Class"
        description: "Ingress controller class name"
        type: string
        default: "nginx"
      - variable: ingress.hosts[0].host
        label: "Host"
        description: "Domain name for the ingress"
        type: string
        default: "transaction-check-api.example.com"
      - variable: ingress.hosts[0].paths[0].path
        label: "Path"
        description: "URL path to route"
        type: string
        default: "/api/payment"
      - variable: ingress.hosts[0].paths[0].pathType
        label: "Path Type"
        description: "Path matching type"
        type: enum
        options:
          - Prefix
          - Exact
          - ImplementationSpecific
        default: "Prefix"

  # Environment Variables
  - variable: REDIS_URI
    label: "Redis URI"
    description: "Redis connection string (e.g., redis://redis-service:6379)"
    type: string
    default: "redis://localhost:6379"
    required: true
    group: "Environment"
  - variable: PORT
    label: "Container Port"
    description: "Port number the container listens on"
    type: string
    default: "3000"
    group: "Environment"

  # Scaling
  - variable: MIN_REPLICA
    label: "Min Replica"
    description: "Minimum number of replicas"
    type: int
    default: 1
    group: "Scaling"
  - variable: MAX_REPLICA
    label: "Max Replica"
    description: "Maximum number of replicas"
    type: int
    default: 5
    group: "Scaling"
  - variable: TARGET_CPU
    label: "Target CPU %"
    description: "Target CPU utilization for autoscaling"
    type: int
    default: 80
    group: "Scaling"
  - variable: TARGET_MEM
    label: "Target Memory %"
    description: "Target memory utilization for autoscaling"
    type: int
    default: 80
    group: "Scaling"
